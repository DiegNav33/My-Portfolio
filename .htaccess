<FilesMatch "^\.env|config\.php">
  Order allow,deny
  Deny from all
</FilesMatch>

RewriteEngine On

# Forcer HTTPS uniquement si ce n'est pas localhost
RewriteCond %{HTTP_HOST} !^(localhost|127\.0\.0\.1) [NC]
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Supprimer "pages/" et ".php" des URLs (y compris sous-dossiers)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9/_-]+)/?$ pages/$1.php [L]

# GÃ©rer l'index proprement
RewriteRule ^index/?$ index.php [L]
